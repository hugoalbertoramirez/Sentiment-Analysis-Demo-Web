<!DOCTYPE html>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://code.highcharts.com/highcharts.js"></script>
        <script src="https://code.highcharts.com/modules/exporting.js"></script>
        <script src="webrtc.js"></script>
        <script src="https://simplewebrtc.com/latest-v2.js"></script> 
        
         <link rel="stylesheet" href="css/bootstrap.css">
       <!-- <script src="js/bootstrap.min.js" ></script> -->
       <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">-->
       <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
       
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
    </head>
    <body>
        <div class="collapse bg-dark" id="navbarHeader">
            <div class="container">
                <div class="row">
                <div class="col-sm-8 py-4">
                    <h4 class="text-white">Sobre el demo</h4>
                    <p class="text-muted">Add some information about the album below, the author, or any other background context. Make it a few sentences long so folks can pick up some informative tidbits. Then, link them off to some social networking sites or contact information.</p>
                </div>
                <div class="col-sm-4 py-4">
                    <h4 class="text-white">¿Cómo interpretar los sentimientos</h4>
                    <p class="text-muted">Add some information about the album below, the author, or any other background context. Make it a few sentences long so folks can pick up some informative tidbits. Then, link them off to some social networking sites or contact information.</p>
                </div>
                </div>
            </div>
            </div>
            <div class="navbar navbar-dark bg-dark">
            <div class="container d-flex justify-content-between">
                <a href="#" class="navbar-brand">Empower Data</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarHeader" aria-controls="navbarHeader" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
                </button>
            </div>
        </div>
            
        <section class="jumbotron text-center">
            <div class="container">
                <h1 class="jumbotron-heading">Análisis de sentimientos en un chat room</h1>
                <p class="lead text-muted">Something short and leading about the collection below—its contents, the creator, etc. Make it short and sweet, but not too short so folks don't simply skip over it entirely.</p>
                <p>
                <a href="#" class="btn btn-primary">Iniciar</a>
                <a href="#" class="btn btn-secondary">Finalizar</a>
                </p>
            </div>
        </section>
        <video id="localVideo" height="300" style=" max-width: 40%px; height: auto; margin: 0% 30% 0% 30%;" ></video>
        <br>
        <div class="bd-callout bd-callout-info">
            <div id="remotesVideos" class="container-fluid"></div>
        </div>
   
    </body>

    <script>
        var webrtc = new SimpleWebRTC({
            localVideoEl: 'localVideo',
            remoteVideosEl: '',
            autoRequestMedia: true
        });

        // we have to wait until it's ready
        webrtc.on('readyToCall', function () {
            webrtc.joinRoom('hugo');
        });

        webrtc.on('videoAdded', function (video, peer) {
            var remotes = document.getElementById('remotesVideos');
            if (remotes) {
                
                var container = document.createElement('div');
                container.className = 'videoContainer';
                container.id = 'container_' + webrtc.getDomId(peer);
                container.appendChild(video);
                container.className = 'row';
                container.margin = "10 0 0 10";
                container.padding = "10 0 0 10";

                // divs
                var id_dinam = webrtc.getDomId(peer);
                var div1 = document.createElement('div');
                var div2 = document.createElement('div');
                var div3 = document.createElement('div');
                var div4 = document.createElement('div');
                var div5 = document.createElement('div');

                div1.id = "div1" + id_dinam;
                div2.id = "div2" + id_dinam;
                div3.id = "div3" + id_dinam;
                div4.id = 'div4' + id_dinam;
                div5.id = 'div5' + id_dinam;

                div1.className = 'col-xs-1';
                div2.className = 'col-md-3';
                div3.className = 'col-md-3';
                div4.className = 'col-md-2';
                div5.className = 'col-xl-3';
                
                var heightVideos = 300;
                var widthVideos = 400;

                // video
                video.height = heightVideos;
                video.oncontextmenu = function () { return false; };
                div2.appendChild(video);

                // canvas:
                var canvas = document.createElement('canvas');
                canvas.height = heightVideos;
                canvas.width = widthVideos;
                div3.appendChild(canvas);

                // pie graph:
                div4.height = heightVideos;
                //div4.width = widthVideos;
                div4.text_align = "center";

                // area graph:
                div5.height = heightVideos;
                div5.width = widthVideos;
                div5.text_align = "center";

                // button:
                var button = document.createElement('button');
                button.innerHTML = " Snap";
                button.className= "btn btn-info fa fa-camera-retro fa-lg fa";
                button.onclick = function() {
                    sentimentAnalysis(video, canvas, div4, div5);
                }
                div1.appendChild(button);

                container.appendChild(div1);
                container.appendChild(div2);
                container.appendChild(div3);
                container.appendChild(div4);
                container.appendChild(div5);

                remotes.appendChild(container);
            }
        });

    </script>

</html>
